<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EANO Coin Dashboard</title>
  <link rel="stylesheet" href="style.css"/>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>

  <!-- Custom Scripts -->
  <script src="firebaseConfig.js" defer></script>
  <script src="lang.js" defer></script>
  <script src="ui.js" defer></script>
</head>

<body>
  <div class="app">
    <!-- Sidebar Menu -->
    <aside class="sidebar" id="sidebar">
      <button class="toggle-btn" onclick="toggleMenu()">‚ò∞</button>
      <nav class="menu">
        <ul>
          <li onclick="navigateTo('home')">üè° Home</li>
          <li onclick="navigateTo('mainnet')">Mainnet <span class="tag">Coming Soon</span></li>
          <li onclick="navigateTo('leaderboard')">Leaderboard</li>
          <li onclick="navigateTo('team')">Team</li>
          <li onclick="navigateTo('community')">Community</li>
          <li onclick="navigateTo('profile')">Profile</li>
          <li onclick="navigateTo('author')">Author</li>
          <li onclick="navigateTo('whitepaper')">WhitePaper</li>
          <li><a href="https://t.me/eanocoin" target="_blank">Support Portal</a></li>
          <li onclick="logoutUser()">Logout</li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top bar -->
      <div class="top-bar">
        <div class="balance">Balance: <span id="coinBalance">0</span> EANO</div>
        <div class="lang-select">
          <select id="languageSelector" onchange="changeLanguage(this.value)">
            <option value="en">EN</option>
            <option value="ig">IG</option>
            <option value="fr">FR</option>
            <option value="pid">PID</option>
            <option value="cn">CN</option>
            <option value="ha">HA</option>
          </select>
        </div>
      </div>

      <!-- Middle buttons -->
      <div class="mid-controls">
        <button class="mine-btn" onclick="mineCoins()">Mine +0.600</button>
        <button class="theme-toggle" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
      </div>

      <!-- Announcements -->
      <section class="announcement">
        <h2>üì¢ Announcement</h2>
        <p>Welcome to the official EANO Coin dashboard. Stay tuned for more updates.</p>
        <img src="announcement.jpg" alt="announcement" class="announcement-img"/>
      </section>

      <!-- Feature Teasers -->
      <section class="coming-soon-features">
        <div class="feature-box">Game 1 - Coming Soon</div>
        <div class="feature-box">Studio - Coming Soon</div>
        <div class="feature-box">Driving School - Coming Soon</div>
      </section>

      <!-- Dynamic View for pages -->
      <section id="dynamicView"></section>
    </main>
  </div>

  <!-- Page Logic -->
  <script>
    function toggleMenu() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    function navigateTo(page) {
      const view = document.getElementById('dynamicView');
      fetch(`sections/${page}.html`)
        .then(res => res.text())
        .then(html => {
          view.innerHTML = html;
          if (window[`init${capitalize(page)}`]) {
            window[`init${capitalize(page)}`](); // optional init
          }
        })
        .catch(() => {
          view.innerHTML = `<h3>${page}</h3><p>Page not found.</p>`;
        });
    }

    function logoutUser() {
      firebase.auth().signOut().then(() => {
        window.location.href = 'index.html';
      });
    }

    function mineCoins() {
      // mining logic already in place
    }

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
    }

    function changeLanguage(lang) {
      if (typeof setLanguage === 'function') {
        setLanguage(lang);
      }
    }

    function capitalize(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }
  </script>
</body>
</html>
