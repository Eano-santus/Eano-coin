<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EANO Dashboard</title>

  <!-- Manifest + Theme -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#000000" />

  <!-- Fonts + CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css?v=5" />

  <!-- GTM -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TSZQ7ZXF');
  </script>
</head>

<body class="dashboard dark-mode">
  <!-- GTM Fallback -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TSZQ7ZXF"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <!-- ğŸ” Topbar -->
  <div class="topbar">
    <div><strong class="brand">EANO</strong></div>
    <div>
      <span id="balance">0.000</span> EANO | <span id="timer">â³</span>
    </div>
    <div class="d-flex align-items-center gap-2">
      <select id="lang-select">
        <option value="en">ğŸŒ English</option>
        <option value="fr">ğŸ‡«ğŸ‡· French</option>
        <option value="sw">ğŸ‡°ğŸ‡ª Swahili</option>
        <option value="ig">ğŸ‡³ğŸ‡¬ Igbo</option>
        <option value="ha">ğŸ‡³ğŸ‡¬ Hausa</option>
        <option value="efik">ğŸ‡³ğŸ‡¬ Efik</option>
        <option value="pid">ğŸ‡³ğŸ‡¬ Pidgin</option>
        <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
      </select>
      <button id="dark-toggle" title="Toggle Dark Mode">ğŸŒ—</button>
    </div>
  </div>

  <!-- ğŸ” Menu Toggle -->
  <button id="menu-toggle">â˜° Menu</button>

  <!-- ğŸ“‹ Sidebar Menu -->
  <div id="sidebar-menu">
    <ul>
      <li><a href="profile.html">ğŸ‘¤ Profile</a></li>
      <li><a href="invite.html">ğŸ‘¥ Referrals</a></li>
      <li><a href="leaderboard.html">ğŸ† Leaderboard</a></li>
      <li><a href="settings.html">âš™ Settings</a></li>
      <li><a href="whitepaper.pdf" target="_blank">ğŸ“„ Whitepaper</a></li>
      <li><button id="logout-btn">ğŸšª Logout</button></li>
    </ul>
  </div>

  <!-- â› Mine Button -->
  <div class="sidebar">
    <button id="mine-btn">â› Start Mining</button>
  </div>

  <!-- ğŸ“£ Announcement -->
  <div id="announcement-box">
    <p id="latest-announcement">ğŸ“¢ EANO App launching soon. Stay tuned!</p>
  </div>

  <!-- ğŸ“¦ Main Dashboard Info -->
  <div class="main-content fade-in">
    <div id="referral-info" class="mt-4">
      <p><strong>Referrals:</strong> <span id="referral-count">0</span></p>
      <p><strong>Mining Level:</strong> <span id="level">ğŸ¥ Chicken</span></p>
      <p><strong>Trust Score:</strong> <span id="trust-score">0</span> - <span id="trust-badge">âš  Low Trust</span></p>
    </div>
  </div>

  <!-- ğŸ¯ Team Shortcut -->
  <div style="margin-top: 20px; text-align: center;">
    <a href="invite.html" class="team-referral-btn">ğŸ‘¥ View Team</a>
  </div>

  <!-- ğŸ”Œ Scripts -->
  <script src="firebase.js"></script>
  <script src="auth.js"></script>
  <script src="ui.js?v=5"></script>
  <script src="lang.js?v=5"></script>
  <script src="dashboard.js?v=5" type="module"></script>
  <script src="settings.js?v=5"></script>
  <script type="module" src="install.js?v=5"></script>

  <!-- ğŸŒ™ Mode Toggle -->
  <script>
    document.getElementById('dark-toggle')?.addEventListener('click', () => {
      document.body.classList.toggle('light-mode');
      document.body.classList.toggle('dark-mode');
    });
  </script>

  <!-- ğŸ“± Sidebar Toggle -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const toggle = document.getElementById("menu-toggle");
      const sidebar = document.getElementById("sidebar-menu");
      toggle?.addEventListener("click", () => {
        sidebar.classList.toggle("open");
      });
      sidebar.querySelectorAll("a, button").forEach((el) => {
        el.addEventListener("click", () => sidebar.classList.remove("open"));
      });
    });
  </script>

  <!-- âš™ Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('âœ… SW registered'))
        .catch(err => console.error('âŒ SW registration failed:', err));
    }
  </script>
</body>
</html>
